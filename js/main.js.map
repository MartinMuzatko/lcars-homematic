{"version":3,"sources":["webpack:///webpack/bootstrap 4f5ebcf4640fb782ab80","webpack:///./index.js","webpack:///./less/main.less?28b5","webpack:///./less/main.less","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./tags/app.html","webpack:///./~/riot/riot.js"],"names":["riot","mount","module","exports","list","toString","result","i","length","item","push","join","modules","mediaQuery","alreadyImportedModules","id","tag2","opts","global","factory","__TAGS_CACHE","__TAG_IMPL","GLOBAL_MIXIN","ATTRS_PREFIX","REF_DIRECTIVES","IS_DIRECTIVE","CONDITIONAL_DIRECTIVE","LOOP_DIRECTIVE","LOOP_NO_REORDER_DIRECTIVE","SHOW_DIRECTIVE","HIDE_DIRECTIVE","T_STRING","T_OBJECT","T_UNDEF","T_FUNCTION","XLINK_NS","XLINK_REGEX","WIN","window","undefined","RE_SPECIAL_TAGS","RE_SPECIAL_TAGS_NO_OPTION","RE_RESERVED_NAMES","RE_SVG_TAGS","RE_HTML_ATTRS","CASE_SENSITIVE_ATTRIBUTES","RE_BOOL_ATTRS","IE_VERSION","document","documentMode","isSVGTag","name","test","isBoolAttr","value","isFunction","isObject","isUndefined","isString","isBlank","isArray","Array","isWritable","obj","key","descriptor","Object","getOwnPropertyDescriptor","writable","isReservedName","check","freeze","$$","selector","ctx","querySelectorAll","$","querySelector","createFrag","createDocumentFragment","createDOMPlaceholder","createTextNode","mkEl","isSvg","createElementNS","createElement","getOuterHTML","el","outerHTML","container","appendChild","cloneNode","innerHTML","setInnerHTML","html","doc","DOMParser","parseFromString","node","ownerDocument","importNode","documentElement","remAttr","dom","removeAttribute","getAttr","getAttribute","setAttr","val","xlink","exec","setAttributeNS","setAttribute","safeInsert","root","curr","next","insertBefore","parentNode","walkAttrs","fn","m","toLowerCase","walkNodes","context","res","firstChild","nextSibling","styleNode","cssTextProp","byName","remainder","needsInject","newNode","userNode","replaceChild","getElementsByTagName","styleSheet","styleManager","add","css","inject","style","keys","map","k","concat","cssText","brackets","UNDEF","REGLOB","R_MLCOMMS","R_STRINGS","S_QBLOCKS","source","UNSUPPORTED","RegExp","NEED_ESCAPE","FINDBRACES","DEFAULT","_pairs","cachedBrackets","_regex","_cache","_settings","_loopback","re","_rewrite","bp","replace","_create","pair","arr","split","Error","_brackets","reOrIdx","str","tmpl","_bp","parts","match","isexpr","start","pos","lastIndex","index","skipBraces","unescapeStr","slice","s","ch","ix","recch","hasExpr","loopKeys","expr","trim","array","_reset","_setSettings","o","b","defineProperty","set","get","enumerable","settings","_tmpl","data","call","_logErr","clearCache","errorHandler","err","riotData","tagName","__","_riot_id","console","error","_getTmpl","Function","CH_IDEXPR","String","fromCharCode","RE_CSNAME","RE_QBLOCK","RE_DQUOTE","RE_QBMARK","qstr","j","_parseExpr","_","RE_BREND","asText","div","cnt","jsb","rightContext","_wrapExpr","mm","lv","ir","JS_CONTEXT","JS_VARNAME","JS_NOPROPS","tb","p","mvar","version","observable$1","callbacks","prototype","defineProperties","on","event","configurable","off","cb","splice","one","apply","arguments","trigger","arguments$1","arglen","args","fns","each","len","contains","indexOf","toCamel","c","toUpperCase","startsWith","options","extend","src","misc","settings$1","create","skipAnonymousTags","EVENTS_PREFIX_REGEX","handleEvent","handler","e","ptag","parent","currentTarget","target","srcElement","which","charCode","keyCode","preventUpdate","getImmediateCustomParentTag","isMounted","update","setEventHandler","tag","eventName","bind","addEventListener","_riotEvents","removeEventListener","updateDataIs","conf","isVirtual","head","ref","unmount","impl","hasImpl","initChildTag","attrs","a","makeReplaceVirtual","onUnmount","delName","dataIs","tags","_tags","arrayishRemove","updateExpression","attrName","attr","isToggle","isValueAttr","old","bool","isRtag","nodeValue","isAttrRemoved","display","updateAllExpressions","expressions","IfExpr","init","stub","pristine","removeChild","newValue","current","parseExpressions","unmountAll","_tag","RefExpr","attrValue","rawValue","hasExp","firstRun","customParent","tagOrDom","refs","arrayishAdd","mkitem","base","unmountRedundant","items","remove","moveNestedTags","this$1","t","moveChildTag","move","nextTag","moveVirtual","insert","makeVirtual","append","_each","mustReorder","getTagName","placeholder","child","getTag","ifExpr","oldItems","hasKeys","isLoop","isAnonymous","updateEach","frag","isObject$$1","filter","doReorder","oldPos","isNew","mustAppend","mustCreate","Tag$1","mustIncludeRoot","tree","children","type","nodeType","tagImpl","attributes","parentElement","parseAttributes","reHasYield","reYieldAll","reYieldSrc","reYieldDest","rootEls","tr","th","td","col","tblTags","GENERIC","specialTags","select","selectedIndex","tname","childElementCount","replaceYield","text","def","mkdom","checkSvg","Tag$2","onCreate","tag$1","class","constructor","mountTo","tag2$1","exists","util","hotReloader","mount$1","pushTagsTo","riotTag","tag$$1","elem","allTags","selectTags","nodeList","_el","mixins","globals","_id","mixin$1","mix","g","store","update$1","unregister$1","core","Tag","mixin","unregister","__uid","updateOpts","instAttrs","skipAnonymous","cleanUpData","implAttrs","propsInSyncWithParent","virts","tail","tagUpdate","nextOpts","shouldUpdate","canTrigger","inheritFrom","tagMixin","instance","props","proto","getPrototypeOf","getOwnPropertyNames","hasGetterSetter","hasOwnProperty","tagMount","_parent","isPrototypeOf","v","globalMixin","tagUnmount","mustKeepRoot","tagIndex","forEach","mustSync","newPos","skipDataIs","namedTag","ensureArray","dest","isArr","hasIndex","oldIndex","isInStub","inStub","implClass","_innerHTML","sib","reduce","vdom","Tag$$1","tag2$$1","mount$$1","mixin$$1","update$$1","unregister$$1","observable","riot$1"],"mappings":"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","file":"./js/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4f5ebcf4640fb782ab80","import './less/main.less'\n\nimport './tags/app.html'\nimport 'riot'\n\nriot.mount('*')\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./main.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./main.less\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./main.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./less/main.less\n// module id = 2\n// module chunks = 0","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/less-loader!./less/main.less\n// module id = 3\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 5\n// module chunks = 0","riot.tag2('app', '<div> example </div>', '', '', function(opts) {\n});\n\n\n\n// WEBPACK FOOTER //\n// ./tags/app.html","/* Riot v3.3.0, @license MIT */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.riot = global.riot || {})));\n}(this, (function (exports) { 'use strict';\n\nvar __TAGS_CACHE = [];\nvar __TAG_IMPL = {};\nvar GLOBAL_MIXIN = '__global_mixin';\nvar ATTRS_PREFIX = 'riot-';\nvar REF_DIRECTIVES = ['ref', 'data-ref'];\nvar IS_DIRECTIVE = 'data-is';\nvar CONDITIONAL_DIRECTIVE = 'if';\nvar LOOP_DIRECTIVE = 'each';\nvar LOOP_NO_REORDER_DIRECTIVE = 'no-reorder';\nvar SHOW_DIRECTIVE = 'show';\nvar HIDE_DIRECTIVE = 'hide';\nvar T_STRING = 'string';\nvar T_OBJECT = 'object';\nvar T_UNDEF  = 'undefined';\nvar T_FUNCTION = 'function';\nvar XLINK_NS = 'http://www.w3.org/1999/xlink';\nvar XLINK_REGEX = /^xlink:(\\w+)/;\nvar WIN = typeof window === T_UNDEF ? undefined : window;\nvar RE_SPECIAL_TAGS = /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/;\nvar RE_SPECIAL_TAGS_NO_OPTION = /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;\nvar RE_RESERVED_NAMES = /^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|trigger|o(?:n|ff|ne))$/;\nvar RE_SVG_TAGS = /^(altGlyph|animate(?:Color)?|circle|clipPath|defs|ellipse|fe(?:Blend|ColorMatrix|ComponentTransfer|Composite|ConvolveMatrix|DiffuseLighting|DisplacementMap|Flood|GaussianBlur|Image|Merge|Morphology|Offset|SpecularLighting|Tile|Turbulence)|filter|font|foreignObject|g(?:lyph)?(?:Ref)?|image|line(?:arGradient)?|ma(?:rker|sk)|missing-glyph|path|pattern|poly(?:gon|line)|radialGradient|rect|stop|svg|switch|symbol|text(?:Path)?|tref|tspan|use)$/;\nvar RE_HTML_ATTRS = /([-\\w]+) ?= ?(?:\"([^\"]*)|'([^']*)|({[^}]*}))/g;\nvar CASE_SENSITIVE_ATTRIBUTES = { 'viewbox': 'viewBox' };\nvar RE_BOOL_ATTRS = /^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/;\nvar IE_VERSION = (WIN && WIN.document || {}).documentMode | 0;\n\n/**\n * Check whether a DOM node must be considered a part of an svg document\n * @param   { String } name -\n * @returns { Boolean } -\n */\nfunction isSVGTag(name) {\n  return RE_SVG_TAGS.test(name)\n}\n\n/**\n * Check Check if the passed argument is undefined\n * @param   { String } value -\n * @returns { Boolean } -\n */\nfunction isBoolAttr(value) {\n  return RE_BOOL_ATTRS.test(value)\n}\n\n/**\n * Check if passed argument is a function\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isFunction(value) {\n  return typeof value === T_FUNCTION\n}\n\n/**\n * Check if passed argument is an object, exclude null\n * NOTE: use isObject(x) && !isArray(x) to excludes arrays.\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isObject(value) {\n  return value && typeof value === T_OBJECT // typeof null is 'object'\n}\n\n/**\n * Check if passed argument is undefined\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isUndefined(value) {\n  return typeof value === T_UNDEF\n}\n\n/**\n * Check if passed argument is a string\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isString(value) {\n  return typeof value === T_STRING\n}\n\n/**\n * Check if passed argument is empty. Different from falsy, because we dont consider 0 or false to be blank\n * @param { * } value -\n * @returns { Boolean } -\n */\nfunction isBlank(value) {\n  return isUndefined(value) || value === null || value === ''\n}\n\n/**\n * Check if passed argument is a kind of array\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isArray(value) {\n  return Array.isArray(value) || value instanceof Array\n}\n\n/**\n * Check whether object's property could be overridden\n * @param   { Object }  obj - source object\n * @param   { String }  key - object property\n * @returns { Boolean } -\n */\nfunction isWritable(obj, key) {\n  var descriptor = Object.getOwnPropertyDescriptor(obj, key);\n  return isUndefined(obj[key]) || descriptor && descriptor.writable\n}\n\n/**\n * Check if passed argument is a reserved name\n * @param   { String } value -\n * @returns { Boolean } -\n */\nfunction isReservedName(value) {\n  return RE_RESERVED_NAMES.test(value)\n}\n\nvar check = Object.freeze({\n\tisSVGTag: isSVGTag,\n\tisBoolAttr: isBoolAttr,\n\tisFunction: isFunction,\n\tisObject: isObject,\n\tisUndefined: isUndefined,\n\tisString: isString,\n\tisBlank: isBlank,\n\tisArray: isArray,\n\tisWritable: isWritable,\n\tisReservedName: isReservedName\n});\n\n/**\n * Shorter and fast way to select multiple nodes in the DOM\n * @param   { String } selector - DOM selector\n * @param   { Object } ctx - DOM node where the targets of our search will is located\n * @returns { Object } dom nodes found\n */\nfunction $$(selector, ctx) {\n  return (ctx || document).querySelectorAll(selector)\n}\n\n/**\n * Shorter and fast way to select a single node in the DOM\n * @param   { String } selector - unique dom selector\n * @param   { Object } ctx - DOM node where the target of our search will is located\n * @returns { Object } dom node found\n */\nfunction $(selector, ctx) {\n  return (ctx || document).querySelector(selector)\n}\n\n/**\n * Create a document fragment\n * @returns { Object } document fragment\n */\nfunction createFrag() {\n  return document.createDocumentFragment()\n}\n\n/**\n * Create a document text node\n * @returns { Object } create a text node to use as placeholder\n */\nfunction createDOMPlaceholder() {\n  return document.createTextNode('')\n}\n\n/**\n * Create a generic DOM node\n * @param   { String } name - name of the DOM node we want to create\n * @param   { Boolean } isSvg - should we use a SVG as parent node?\n * @returns { Object } DOM node just created\n */\nfunction mkEl(name, isSvg) {\n  return isSvg ?\n    document.createElementNS('http://www.w3.org/2000/svg', 'svg') :\n    document.createElement(name)\n}\n\n/**\n * Get the outer html of any DOM node SVGs included\n * @param   { Object } el - DOM node to parse\n * @returns { String } el.outerHTML\n */\nfunction getOuterHTML(el) {\n  if (el.outerHTML)\n    { return el.outerHTML }\n  // some browsers do not support outerHTML on the SVGs tags\n  else {\n    var container = mkEl('div');\n    container.appendChild(el.cloneNode(true));\n    return container.innerHTML\n  }\n}\n\n/**\n * Set the inner html of any DOM node SVGs included\n * @param { Object } container - DOM node where we'll inject new html\n * @param { String } html - html to inject\n */\nfunction setInnerHTML(container, html) {\n  if (!isUndefined(container.innerHTML))\n    { container.innerHTML = html; }\n    // some browsers do not support innerHTML on the SVGs tags\n  else {\n    var doc = new DOMParser().parseFromString(html, 'application/xml');\n    var node = container.ownerDocument.importNode(doc.documentElement, true);\n    container.appendChild(node);\n  }\n}\n\n/**\n * Remove any DOM attribute from a node\n * @param   { Object } dom - DOM node we want to update\n * @param   { String } name - name of the property we want to remove\n */\nfunction remAttr(dom, name) {\n  dom.removeAttribute(name);\n}\n\n/**\n * Get the value of any DOM attribute on a node\n * @param   { Object } dom - DOM node we want to parse\n * @param   { String } name - name of the attribute we want to get\n * @returns { String | undefined } name of the node attribute whether it exists\n */\nfunction getAttr(dom, name) {\n  return dom.getAttribute(name)\n}\n\n/**\n * Set any DOM attribute\n * @param { Object } dom - DOM node we want to update\n * @param { String } name - name of the property we want to set\n * @param { String } val - value of the property we want to set\n */\nfunction setAttr(dom, name, val) {\n  var xlink = XLINK_REGEX.exec(name);\n  if (xlink && xlink[1])\n    { dom.setAttributeNS(XLINK_NS, xlink[1], val); }\n  else\n    { dom.setAttribute(name, val); }\n}\n\n/**\n * Insert safely a tag to fix #1962 #1649\n * @param   { HTMLElement } root - children container\n * @param   { HTMLElement } curr - node to insert\n * @param   { HTMLElement } next - node that should preceed the current node inserted\n */\nfunction safeInsert(root, curr, next) {\n  root.insertBefore(curr, next.parentNode && next);\n}\n\n/**\n * Minimize risk: only zero or one _space_ between attr & value\n * @param   { String }   html - html string we want to parse\n * @param   { Function } fn - callback function to apply on any attribute found\n */\nfunction walkAttrs(html, fn) {\n  if (!html)\n    { return }\n  var m;\n  while (m = RE_HTML_ATTRS.exec(html))\n    { fn(m[1].toLowerCase(), m[2] || m[3] || m[4]); }\n}\n\n/**\n * Walk down recursively all the children tags starting dom node\n * @param   { Object }   dom - starting node where we will start the recursion\n * @param   { Function } fn - callback to transform the child node just found\n * @param   { Object }   context - fn can optionally return an object, which is passed to children\n */\nfunction walkNodes(dom, fn, context) {\n  if (dom) {\n    var res = fn(dom, context);\n    var next;\n    // stop the recursion\n    if (res === false) { return }\n\n    dom = dom.firstChild;\n\n    while (dom) {\n      next = dom.nextSibling;\n      walkNodes(dom, fn, res);\n      dom = next;\n    }\n  }\n}\n\nvar dom = Object.freeze({\n\t$$: $$,\n\t$: $,\n\tcreateFrag: createFrag,\n\tcreateDOMPlaceholder: createDOMPlaceholder,\n\tmkEl: mkEl,\n\tgetOuterHTML: getOuterHTML,\n\tsetInnerHTML: setInnerHTML,\n\tremAttr: remAttr,\n\tgetAttr: getAttr,\n\tsetAttr: setAttr,\n\tsafeInsert: safeInsert,\n\twalkAttrs: walkAttrs,\n\twalkNodes: walkNodes\n});\n\nvar styleNode;\nvar cssTextProp;\nvar byName = {};\nvar remainder = [];\nvar needsInject = false;\n\n// skip the following code on the server\nif (WIN) {\n  styleNode = (function () {\n    // create a new style element with the correct type\n    var newNode = mkEl('style');\n    setAttr(newNode, 'type', 'text/css');\n\n    // replace any user node or insert the new one into the head\n    var userNode = $('style[type=riot]');\n    if (userNode) {\n      if (userNode.id) { newNode.id = userNode.id; }\n      userNode.parentNode.replaceChild(newNode, userNode);\n    }\n    else { document.getElementsByTagName('head')[0].appendChild(newNode); }\n\n    return newNode\n  })();\n  cssTextProp = styleNode.styleSheet;\n}\n\n/**\n * Object that will be used to inject and manage the css of every tag instance\n */\nvar styleManager = {\n  styleNode: styleNode,\n  /**\n   * Save a tag style to be later injected into DOM\n   * @param { String } css - css string\n   * @param { String } name - if it's passed we will map the css to a tagname\n   */\n  add: function add(css, name) {\n    if (name) { byName[name] = css; }\n    else { remainder.push(css); }\n    needsInject = true;\n  },\n  /**\n   * Inject all previously saved tag styles into DOM\n   * innerHTML seems slow: http://jsperf.com/riot-insert-style\n   */\n  inject: function inject() {\n    if (!WIN || !needsInject) { return }\n    needsInject = false;\n    var style = Object.keys(byName)\n      .map(function(k) { return byName[k] })\n      .concat(remainder).join('\\n');\n    if (cssTextProp) { cssTextProp.cssText = style; }\n    else { styleNode.innerHTML = style; }\n  }\n};\n\n/**\n * The riot template engine\n * @version v3.0.2\n */\n/**\n * riot.util.brackets\n *\n * - `brackets    ` - Returns a string or regex based on its parameter\n * - `brackets.set` - Change the current riot brackets\n *\n * @module\n */\n\n/* global riot */\n\nvar brackets = (function (UNDEF) {\n\n  var\n    REGLOB = 'g',\n\n    R_MLCOMMS = /\\/\\*[^*]*\\*+(?:[^*\\/][^*]*\\*+)*\\//g,\n\n    R_STRINGS = /\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'/g,\n\n    S_QBLOCKS = R_STRINGS.source + '|' +\n      /(?:\\breturn\\s+|(?:[$\\w\\)\\]]|\\+\\+|--)\\s*(\\/)(?![*\\/]))/.source + '|' +\n      /\\/(?=[^*\\/])[^[\\/\\\\]*(?:(?:\\[(?:\\\\.|[^\\]\\\\]*)*\\]|\\\\.)[^[\\/\\\\]*)*?(\\/)[gim]*/.source,\n\n    UNSUPPORTED = RegExp('[\\\\' + 'x00-\\\\x1F<>a-zA-Z0-9\\'\",;\\\\\\\\]'),\n\n    NEED_ESCAPE = /(?=[[\\]()*+?.^$|])/g,\n\n    FINDBRACES = {\n      '(': RegExp('([()])|'   + S_QBLOCKS, REGLOB),\n      '[': RegExp('([[\\\\]])|' + S_QBLOCKS, REGLOB),\n      '{': RegExp('([{}])|'   + S_QBLOCKS, REGLOB)\n    },\n\n    DEFAULT = '{ }';\n\n  var _pairs = [\n    '{', '}',\n    '{', '}',\n    /{[^}]*}/,\n    /\\\\([{}])/g,\n    /\\\\({)|{/g,\n    RegExp('\\\\\\\\(})|([[({])|(})|' + S_QBLOCKS, REGLOB),\n    DEFAULT,\n    /^\\s*{\\^?\\s*([$\\w]+)(?:\\s*,\\s*(\\S+))?\\s+in\\s+(\\S.*)\\s*}/,\n    /(^|[^\\\\]){=[\\S\\s]*?}/\n  ];\n\n  var\n    cachedBrackets = UNDEF,\n    _regex,\n    _cache = [],\n    _settings;\n\n  function _loopback (re) { return re }\n\n  function _rewrite (re, bp) {\n    if (!bp) { bp = _cache; }\n    return new RegExp(\n      re.source.replace(/{/g, bp[2]).replace(/}/g, bp[3]), re.global ? REGLOB : ''\n    )\n  }\n\n  function _create (pair) {\n    if (pair === DEFAULT) { return _pairs }\n\n    var arr = pair.split(' ');\n\n    if (arr.length !== 2 || UNSUPPORTED.test(pair)) {\n      throw new Error('Unsupported brackets \"' + pair + '\"')\n    }\n    arr = arr.concat(pair.replace(NEED_ESCAPE, '\\\\').split(' '));\n\n    arr[4] = _rewrite(arr[1].length > 1 ? /{[\\S\\s]*?}/ : _pairs[4], arr);\n    arr[5] = _rewrite(pair.length > 3 ? /\\\\({|})/g : _pairs[5], arr);\n    arr[6] = _rewrite(_pairs[6], arr);\n    arr[7] = RegExp('\\\\\\\\(' + arr[3] + ')|([[({])|(' + arr[3] + ')|' + S_QBLOCKS, REGLOB);\n    arr[8] = pair;\n    return arr\n  }\n\n  function _brackets (reOrIdx) {\n    return reOrIdx instanceof RegExp ? _regex(reOrIdx) : _cache[reOrIdx]\n  }\n\n  _brackets.split = function split (str, tmpl, _bp) {\n    // istanbul ignore next: _bp is for the compiler\n    if (!_bp) { _bp = _cache; }\n\n    var\n      parts = [],\n      match,\n      isexpr,\n      start,\n      pos,\n      re = _bp[6];\n\n    isexpr = start = re.lastIndex = 0;\n\n    while ((match = re.exec(str))) {\n\n      pos = match.index;\n\n      if (isexpr) {\n\n        if (match[2]) {\n          re.lastIndex = skipBraces(str, match[2], re.lastIndex);\n          continue\n        }\n        if (!match[3]) {\n          continue\n        }\n      }\n\n      if (!match[1]) {\n        unescapeStr(str.slice(start, pos));\n        start = re.lastIndex;\n        re = _bp[6 + (isexpr ^= 1)];\n        re.lastIndex = start;\n      }\n    }\n\n    if (str && start < str.length) {\n      unescapeStr(str.slice(start));\n    }\n\n    return parts\n\n    function unescapeStr (s) {\n      if (tmpl || isexpr) {\n        parts.push(s && s.replace(_bp[5], '$1'));\n      } else {\n        parts.push(s);\n      }\n    }\n\n    function skipBraces (s, ch, ix) {\n      var\n        match,\n        recch = FINDBRACES[ch];\n\n      recch.lastIndex = ix;\n      ix = 1;\n      while ((match = recch.exec(s))) {\n        if (match[1] &&\n          !(match[1] === ch ? ++ix : --ix)) { break }\n      }\n      return ix ? s.length : recch.lastIndex\n    }\n  };\n\n  _brackets.hasExpr = function hasExpr (str) {\n    return _cache[4].test(str)\n  };\n\n  _brackets.loopKeys = function loopKeys (expr) {\n    var m = expr.match(_cache[9]);\n\n    return m\n      ? { key: m[1], pos: m[2], val: _cache[0] + m[3].trim() + _cache[1] }\n      : { val: expr.trim() }\n  };\n\n  _brackets.array = function array (pair) {\n    return pair ? _create(pair) : _cache\n  };\n\n  function _reset (pair) {\n    if ((pair || (pair = DEFAULT)) !== _cache[8]) {\n      _cache = _create(pair);\n      _regex = pair === DEFAULT ? _loopback : _rewrite;\n      _cache[9] = _regex(_pairs[9]);\n    }\n    cachedBrackets = pair;\n  }\n\n  function _setSettings (o) {\n    var b;\n\n    o = o || {};\n    b = o.brackets;\n    Object.defineProperty(o, 'brackets', {\n      set: _reset,\n      get: function () { return cachedBrackets },\n      enumerable: true\n    });\n    _settings = o;\n    _reset(b);\n  }\n\n  Object.defineProperty(_brackets, 'settings', {\n    set: _setSettings,\n    get: function () { return _settings }\n  });\n\n  /* istanbul ignore next: in the browser riot is always in the scope */\n  _brackets.settings = typeof riot !== 'undefined' && riot.settings || {};\n  _brackets.set = _reset;\n\n  _brackets.R_STRINGS = R_STRINGS;\n  _brackets.R_MLCOMMS = R_MLCOMMS;\n  _brackets.S_QBLOCKS = S_QBLOCKS;\n\n  return _brackets\n\n})();\n\n/**\n * @module tmpl\n *\n * tmpl          - Root function, returns the template value, render with data\n * tmpl.hasExpr  - Test the existence of a expression inside a string\n * tmpl.loopKeys - Get the keys for an 'each' loop (used by `_each`)\n */\n\nvar tmpl = (function () {\n\n  var _cache = {};\n\n  function _tmpl (str, data) {\n    if (!str) { return str }\n\n    return (_cache[str] || (_cache[str] = _create(str))).call(data, _logErr)\n  }\n\n  _tmpl.hasExpr = brackets.hasExpr;\n\n  _tmpl.loopKeys = brackets.loopKeys;\n\n  // istanbul ignore next\n  _tmpl.clearCache = function () { _cache = {}; };\n\n  _tmpl.errorHandler = null;\n\n  function _logErr (err, ctx) {\n\n    err.riotData = {\n      tagName: ctx && ctx.__ && ctx.__.tagName,\n      _riot_id: ctx && ctx._riot_id  //eslint-disable-line camelcase\n    };\n\n    if (_tmpl.errorHandler) { _tmpl.errorHandler(err); }\n    else if (\n      typeof console !== 'undefined' &&\n      typeof console.error === 'function'\n    ) {\n      if (err.riotData.tagName) {\n        console.error('Riot template error thrown in the <%s> tag', err.riotData.tagName);\n      }\n      console.error(err);\n    }\n  }\n\n  function _create (str) {\n    var expr = _getTmpl(str);\n\n    if (expr.slice(0, 11) !== 'try{return ') { expr = 'return ' + expr; }\n\n    return new Function('E', expr + ';')    // eslint-disable-line no-new-func\n  }\n\n  var\n    CH_IDEXPR = String.fromCharCode(0x2057),\n    RE_CSNAME = /^(?:(-?[_A-Za-z\\xA0-\\xFF][-\\w\\xA0-\\xFF]*)|\\u2057(\\d+)~):/,\n    RE_QBLOCK = RegExp(brackets.S_QBLOCKS, 'g'),\n    RE_DQUOTE = /\\u2057/g,\n    RE_QBMARK = /\\u2057(\\d+)~/g;\n\n  function _getTmpl (str) {\n    var\n      qstr = [],\n      expr,\n      parts = brackets.split(str.replace(RE_DQUOTE, '\"'), 1);\n\n    if (parts.length > 2 || parts[0]) {\n      var i, j, list = [];\n\n      for (i = j = 0; i < parts.length; ++i) {\n\n        expr = parts[i];\n\n        if (expr && (expr = i & 1\n\n            ? _parseExpr(expr, 1, qstr)\n\n            : '\"' + expr\n                .replace(/\\\\/g, '\\\\\\\\')\n                .replace(/\\r\\n?|\\n/g, '\\\\n')\n                .replace(/\"/g, '\\\\\"') +\n              '\"'\n\n          )) { list[j++] = expr; }\n\n      }\n\n      expr = j < 2 ? list[0]\n           : '[' + list.join(',') + '].join(\"\")';\n\n    } else {\n\n      expr = _parseExpr(parts[1], 0, qstr);\n    }\n\n    if (qstr[0]) {\n      expr = expr.replace(RE_QBMARK, function (_, pos) {\n        return qstr[pos]\n          .replace(/\\r/g, '\\\\r')\n          .replace(/\\n/g, '\\\\n')\n      });\n    }\n    return expr\n  }\n\n  var\n    RE_BREND = {\n      '(': /[()]/g,\n      '[': /[[\\]]/g,\n      '{': /[{}]/g\n    };\n\n  function _parseExpr (expr, asText, qstr) {\n\n    expr = expr\n          .replace(RE_QBLOCK, function (s, div) {\n            return s.length > 2 && !div ? CH_IDEXPR + (qstr.push(s) - 1) + '~' : s\n          })\n          .replace(/\\s+/g, ' ').trim()\n          .replace(/\\ ?([[\\({},?\\.:])\\ ?/g, '$1');\n\n    if (expr) {\n      var\n        list = [],\n        cnt = 0,\n        match;\n\n      while (expr &&\n            (match = expr.match(RE_CSNAME)) &&\n            !match.index\n        ) {\n        var\n          key,\n          jsb,\n          re = /,|([[{(])|$/g;\n\n        expr = RegExp.rightContext;\n        key  = match[2] ? qstr[match[2]].slice(1, -1).trim().replace(/\\s+/g, ' ') : match[1];\n\n        while (jsb = (match = re.exec(expr))[1]) { skipBraces(jsb, re); }\n\n        jsb  = expr.slice(0, match.index);\n        expr = RegExp.rightContext;\n\n        list[cnt++] = _wrapExpr(jsb, 1, key);\n      }\n\n      expr = !cnt ? _wrapExpr(expr, asText)\n           : cnt > 1 ? '[' + list.join(',') + '].join(\" \").trim()' : list[0];\n    }\n    return expr\n\n    function skipBraces (ch, re) {\n      var\n        mm,\n        lv = 1,\n        ir = RE_BREND[ch];\n\n      ir.lastIndex = re.lastIndex;\n      while (mm = ir.exec(expr)) {\n        if (mm[0] === ch) { ++lv; }\n        else if (!--lv) { break }\n      }\n      re.lastIndex = lv ? expr.length : ir.lastIndex;\n    }\n  }\n\n  // istanbul ignore next: not both\n  var // eslint-disable-next-line max-len\n    JS_CONTEXT = '\"in this?this:' + (typeof window !== 'object' ? 'global' : 'window') + ').',\n    JS_VARNAME = /[,{][\\$\\w]+(?=:)|(^ *|[^$\\w\\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\\w]))([$_A-Za-z][$\\w]*)/g,\n    JS_NOPROPS = /^(?=(\\.[$\\w]+))\\1(?:[^.[(]|$)/;\n\n  function _wrapExpr (expr, asText, key) {\n    var tb;\n\n    expr = expr.replace(JS_VARNAME, function (match, p, mvar, pos, s) {\n      if (mvar) {\n        pos = tb ? 0 : pos + match.length;\n\n        if (mvar !== 'this' && mvar !== 'global' && mvar !== 'window') {\n          match = p + '(\"' + mvar + JS_CONTEXT + mvar;\n          if (pos) { tb = (s = s[pos]) === '.' || s === '(' || s === '['; }\n        } else if (pos) {\n          tb = !JS_NOPROPS.test(s.slice(pos));\n        }\n      }\n      return match\n    });\n\n    if (tb) {\n      expr = 'try{return ' + expr + '}catch(e){E(e,this)}';\n    }\n\n    if (key) {\n\n      expr = (tb\n          ? 'function(){' + expr + '}.call(this)' : '(' + expr + ')'\n        ) + '?\"' + key + '\":\"\"';\n\n    } else if (asText) {\n\n      expr = 'function(v){' + (tb\n          ? expr.replace('return ', 'v=') : 'v=(' + expr + ')'\n        ) + ';return v||v===0?v:\"\"}.call(this)';\n    }\n\n    return expr\n  }\n\n  _tmpl.version = brackets.version = 'v3.0.2';\n\n  return _tmpl\n\n})();\n\nvar observable$1 = function(el) {\n\n  /**\n   * Extend the original object or create a new empty one\n   * @type { Object }\n   */\n\n  el = el || {};\n\n  /**\n   * Private variables\n   */\n  var callbacks = {},\n    slice = Array.prototype.slice;\n\n  /**\n   * Public Api\n   */\n\n  // extend the el object adding the observable methods\n  Object.defineProperties(el, {\n    /**\n     * Listen to the given `event` ands\n     * execute the `callback` each time an event is triggered.\n     * @param  { String } event - event id\n     * @param  { Function } fn - callback function\n     * @returns { Object } el\n     */\n    on: {\n      value: function(event, fn) {\n        if (typeof fn == 'function')\n          { (callbacks[event] = callbacks[event] || []).push(fn); }\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Removes the given `event` listeners\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    off: {\n      value: function(event, fn) {\n        if (event == '*' && !fn) { callbacks = {}; }\n        else {\n          if (fn) {\n            var arr = callbacks[event];\n            for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n              if (cb == fn) { arr.splice(i--, 1); }\n            }\n          } else { delete callbacks[event]; }\n        }\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Listen to the given `event` and\n     * execute the `callback` at most once\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    one: {\n      value: function(event, fn) {\n        function on() {\n          el.off(event, on);\n          fn.apply(el, arguments);\n        }\n        return el.on(event, on)\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Execute all callback functions that listen to\n     * the given `event`\n     * @param   { String } event - event id\n     * @returns { Object } el\n     */\n    trigger: {\n      value: function(event) {\n        var arguments$1 = arguments;\n\n\n        // getting the arguments\n        var arglen = arguments.length - 1,\n          args = new Array(arglen),\n          fns,\n          fn,\n          i;\n\n        for (i = 0; i < arglen; i++) {\n          args[i] = arguments$1[i + 1]; // skip first argument\n        }\n\n        fns = slice.call(callbacks[event] || [], 0);\n\n        for (i = 0; fn = fns[i]; ++i) {\n          fn.apply(el, args);\n        }\n\n        if (callbacks['*'] && event != '*')\n          { el.trigger.apply(el, ['*', event].concat(args)); }\n\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    }\n  });\n\n  return el\n\n};\n\n/**\n * Specialized function for looping an array-like collection with `each={}`\n * @param   { Array } list - collection of items\n * @param   {Function} fn - callback function\n * @returns { Array } the array looped\n */\nfunction each(list, fn) {\n  var len = list ? list.length : 0;\n\n  for (var i = 0, el; i < len; ++i) {\n    el = list[i];\n    // return false -> current item was removed by fn during the loop\n    if (fn(el, i) === false)\n      { i--; }\n  }\n  return list\n}\n\n/**\n * Check whether an array contains an item\n * @param   { Array } array - target array\n * @param   { * } item - item to test\n * @returns { Boolean } -\n */\nfunction contains(array, item) {\n  return array.indexOf(item) !== -1\n}\n\n/**\n * Convert a string containing dashes to camel case\n * @param   { String } str - input string\n * @returns { String } my-string -> myString\n */\nfunction toCamel(str) {\n  return str.replace(/-(\\w)/g, function (_, c) { return c.toUpperCase(); })\n}\n\n/**\n * Faster String startsWith alternative\n * @param   { String } str - source string\n * @param   { String } value - test string\n * @returns { Boolean } -\n */\nfunction startsWith(str, value) {\n  return str.slice(0, value.length) === value\n}\n\n/**\n * Helper function to set an immutable property\n * @param   { Object } el - object where the new property will be set\n * @param   { String } key - object key where the new property will be stored\n * @param   { * } value - value of the new property\n * @param   { Object } options - set the propery overriding the default options\n * @returns { Object } - the initial object\n */\nfunction defineProperty(el, key, value, options) {\n  Object.defineProperty(el, key, extend({\n    value: value,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  }, options));\n  return el\n}\n\n/**\n * Extend any object with other properties\n * @param   { Object } src - source object\n * @returns { Object } the resulting extended object\n *\n * var obj = { foo: 'baz' }\n * extend(obj, {bar: 'bar', foo: 'bar'})\n * console.log(obj) => {bar: 'bar', foo: 'bar'}\n *\n */\nfunction extend(src) {\n  var obj, args = arguments;\n  for (var i = 1; i < args.length; ++i) {\n    if (obj = args[i]) {\n      for (var key in obj) {\n        // check if this property of the source object could be overridden\n        if (isWritable(src, key))\n          { src[key] = obj[key]; }\n      }\n    }\n  }\n  return src\n}\n\nvar misc = Object.freeze({\n\teach: each,\n\tcontains: contains,\n\ttoCamel: toCamel,\n\tstartsWith: startsWith,\n\tdefineProperty: defineProperty,\n\textend: extend\n});\n\nvar settings$1 = extend(Object.create(brackets.settings), {\n  skipAnonymousTags: true\n});\n\nvar EVENTS_PREFIX_REGEX = /^on/;\n\n/**\n * Trigger DOM events\n * @param   { HTMLElement } dom - dom element target of the event\n * @param   { Function } handler - user function\n * @param   { Object } e - event object\n */\nfunction handleEvent(dom, handler, e) {\n  var ptag = this.__.parent,\n    item = this.__.item;\n\n  if (!item)\n    { while (ptag && !item) {\n      item = ptag.__.item;\n      ptag = ptag.__.parent;\n    } }\n\n  // override the event properties\n  if (isWritable(e, 'currentTarget')) { e.currentTarget = dom; }\n  if (isWritable(e, 'target')) { e.target = e.srcElement; }\n  if (isWritable(e, 'which')) { e.which = e.charCode || e.keyCode; }\n\n  e.item = item;\n\n  handler.call(this, e);\n\n  if (!e.preventUpdate) {\n    var p = getImmediateCustomParentTag(this);\n    // fixes #2083\n    if (p.isMounted) { p.update(); }\n  }\n}\n\n/**\n * Attach an event to a DOM node\n * @param { String } name - event name\n * @param { Function } handler - event callback\n * @param { Object } dom - dom node\n * @param { Tag } tag - tag instance\n */\nfunction setEventHandler(name, handler, dom, tag) {\n  var eventName,\n    cb = handleEvent.bind(tag, dom, handler);\n\n  if (!dom.addEventListener) {\n    dom[name] = cb;\n    return\n  }\n\n  // avoid to bind twice the same event\n  dom[name] = null;\n\n  // normalize event name\n  eventName = name.replace(EVENTS_PREFIX_REGEX, '');\n\n  // cache the callback directly on the DOM node\n  if (!dom._riotEvents) { dom._riotEvents = {}; }\n\n  if (dom._riotEvents[name])\n    { dom.removeEventListener(eventName, dom._riotEvents[name]); }\n\n  dom._riotEvents[name] = cb;\n  dom.addEventListener(eventName, cb, false);\n}\n\n/**\n * Update dynamically created data-is tags with changing expressions\n * @param { Object } expr - expression tag and expression info\n * @param { Tag } parent - parent for tag creation\n */\nfunction updateDataIs(expr, parent) {\n  var tagName = tmpl(expr.value, parent),\n    conf, isVirtual, head, ref;\n\n  if (expr.tag && expr.tagName === tagName) {\n    expr.tag.update();\n    return\n  }\n\n  isVirtual = expr.dom.tagName === 'VIRTUAL';\n  // sync _parent to accommodate changing tagnames\n  if (expr.tag) {\n\n    // need placeholder before unmount\n    if(isVirtual) {\n      head = expr.tag.__.head;\n      ref = createDOMPlaceholder();\n      head.parentNode.insertBefore(ref, head);\n    }\n\n    expr.tag.unmount(true);\n  }\n\n  expr.impl = __TAG_IMPL[tagName];\n  conf = {root: expr.dom, parent: parent, hasImpl: true, tagName: tagName};\n  expr.tag = initChildTag(expr.impl, conf, expr.dom.innerHTML, parent);\n  each(expr.attrs, function (a) { return setAttr(expr.tag.root, a.name, a.value); });\n  expr.tagName = tagName;\n  expr.tag.mount();\n  if (isVirtual)\n    { makeReplaceVirtual(expr.tag, ref || expr.tag.root); } // root exist first time, after use placeholder\n\n  // parent is the placeholder tag, not the dynamic tag so clean up\n  parent.__.onUnmount = function() {\n    var delName = expr.tag.opts.dataIs,\n      tags = expr.tag.parent.tags,\n      _tags = expr.tag.__.parent.tags;\n    arrayishRemove(tags, delName, expr.tag);\n    arrayishRemove(_tags, delName, expr.tag);\n    expr.tag.unmount();\n  };\n}\n\n/**\n * Update on single tag expression\n * @this Tag\n * @param { Object } expr - expression logic\n * @returns { undefined }\n */\nfunction updateExpression(expr) {\n  if (this.root && getAttr(this.root,'virtualized')) { return }\n\n  var dom = expr.dom,\n    attrName = expr.attr,\n    isToggle = contains([SHOW_DIRECTIVE, HIDE_DIRECTIVE], attrName),\n    value = tmpl(expr.expr, this),\n    isValueAttr = attrName === 'riot-value',\n    isVirtual = expr.root && expr.root.tagName === 'VIRTUAL',\n    parent = dom && (expr.parent || dom.parentNode),\n    old;\n\n  if (expr.bool)\n    { value = value ? attrName : false; }\n  else if (isUndefined(value) || value === null)\n    { value = ''; }\n\n  if (expr._riot_id) { // if it's a tag\n    if (expr.isMounted) {\n      expr.update();\n\n    // if it hasn't been mounted yet, do that now.\n    } else {\n      expr.mount();\n\n      if (isVirtual)\n        { makeReplaceVirtual(expr, expr.root); }\n\n    }\n    return\n  }\n\n  old = expr.value;\n  expr.value = value;\n\n  if (expr.update) {\n    expr.update();\n    return\n  }\n\n  if (expr.isRtag && value) { return updateDataIs(expr, this) }\n  if (old === value) { return }\n  // no change, so nothing more to do\n  if (isValueAttr && dom.value === value) { return }\n\n  // textarea and text nodes have no attribute name\n  if (!attrName) {\n    // about #815 w/o replace: the browser converts the value to a string,\n    // the comparison by \"==\" does too, but not in the server\n    value += '';\n    // test for parent avoids error with invalid assignment to nodeValue\n    if (parent) {\n      // cache the parent node because somehow it will become null on IE\n      // on the next iteration\n      expr.parent = parent;\n      if (parent.tagName === 'TEXTAREA') {\n        parent.value = value;                    // #1113\n        if (!IE_VERSION) { dom.nodeValue = value; }  // #1625 IE throws here, nodeValue\n      }                                         // will be available on 'updated'\n      else { dom.nodeValue = value; }\n    }\n    return\n  }\n\n  // remove original attribute\n  if (!expr.isAttrRemoved || !value) {\n    remAttr(dom, attrName);\n    expr.isAttrRemoved = true;\n  }\n\n  // event handler\n  if (isFunction(value)) {\n    setEventHandler(attrName, value, dom, this);\n  // show / hide\n  } else if (isToggle) {\n    if (attrName === HIDE_DIRECTIVE) { value = !value; }\n    dom.style.display = value ? '' : 'none';\n  // field value\n  } else if (isValueAttr) {\n    dom.value = value;\n  // <img src=\"{ expr }\">\n  } else if (startsWith(attrName, ATTRS_PREFIX) && attrName !== IS_DIRECTIVE) {\n    attrName = attrName.slice(ATTRS_PREFIX.length);\n    if (CASE_SENSITIVE_ATTRIBUTES[attrName])\n      { attrName = CASE_SENSITIVE_ATTRIBUTES[attrName]; }\n    if (value != null)\n      { setAttr(dom, attrName, value); }\n  } else {\n    if (expr.bool) {\n      dom[attrName] = value;\n      if (!value) { return }\n    }\n\n    if (value === 0 || value && typeof value !== T_OBJECT) {\n      setAttr(dom, attrName, value);\n    }\n  }\n}\n\n/**\n * Update all the expressions in a Tag instance\n * @this Tag\n * @param { Array } expressions - expression that must be re evaluated\n */\nfunction updateAllExpressions(expressions) {\n  each(expressions, updateExpression.bind(this));\n}\n\nvar IfExpr = {\n  init: function init(dom, tag, expr) {\n    remAttr(dom, CONDITIONAL_DIRECTIVE);\n    this.tag = tag;\n    this.expr = expr;\n    this.stub = document.createTextNode('');\n    this.pristine = dom;\n\n    var p = dom.parentNode;\n    p.insertBefore(this.stub, dom);\n    p.removeChild(dom);\n\n    return this\n  },\n  update: function update() {\n    var newValue = tmpl(this.expr, this.tag);\n\n    if (newValue && !this.current) { // insert\n      this.current = this.pristine.cloneNode(true);\n      this.stub.parentNode.insertBefore(this.current, this.stub);\n\n      this.expressions = [];\n      parseExpressions.apply(this.tag, [this.current, this.expressions, true]);\n    } else if (!newValue && this.current) { // remove\n      unmountAll(this.expressions);\n      if (this.current._tag) {\n        this.current._tag.unmount();\n      } else if (this.current.parentNode)\n        { this.current.parentNode.removeChild(this.current); }\n      this.current = null;\n      this.expressions = [];\n    }\n\n    if (newValue) { updateAllExpressions.call(this.tag, this.expressions); }\n  },\n  unmount: function unmount() {\n    unmountAll(this.expressions || []);\n    delete this.pristine;\n    delete this.parentNode;\n    delete this.stub;\n  }\n};\n\nvar RefExpr = {\n  init: function init(dom, parent, attrName, attrValue) {\n    this.dom = dom;\n    this.attr = attrName;\n    this.rawValue = attrValue;\n    this.parent = parent;\n    this.hasExp = tmpl.hasExpr(attrValue);\n    this.firstRun = true;\n\n    return this\n  },\n  update: function update() {\n    var value = this.rawValue;\n    if (this.hasExp)\n      { value = tmpl(this.rawValue, this.parent); }\n\n    // if nothing changed, we're done\n    if (!this.firstRun && value === this.value) { return }\n\n    var customParent = this.parent && getImmediateCustomParentTag(this.parent);\n\n    // if the referenced element is a custom tag, then we set the tag itself, rather than DOM\n    var tagOrDom = this.tag || this.dom;\n\n    // the name changed, so we need to remove it from the old key (if present)\n    if (!isBlank(this.value) && customParent)\n      { arrayishRemove(customParent.refs, this.value, tagOrDom); }\n\n    if (isBlank(value)) {\n      // if the value is blank, we remove it\n      remAttr(this.dom, this.attr);\n    } else {\n      // add it to the refs of parent tag (this behavior was changed >=3.0)\n      if (customParent) { arrayishAdd(\n        customParent.refs,\n        value,\n        tagOrDom,\n        // use an array if it's a looped node and the ref is not an expression\n        null,\n        this.parent.__.index\n      ); }\n      // set the actual DOM attr\n      setAttr(this.dom, this.attr, value);\n    }\n\n    this.value = value;\n    this.firstRun = false;\n  },\n  unmount: function unmount() {\n    var tagOrDom = this.tag || this.dom;\n    var customParent = this.parent && getImmediateCustomParentTag(this.parent);\n    if (!isBlank(this.value) && customParent)\n      { arrayishRemove(customParent.refs, this.value, tagOrDom); }\n    delete this.dom;\n    delete this.parent;\n  }\n};\n\n/**\n * Convert the item looped into an object used to extend the child tag properties\n * @param   { Object } expr - object containing the keys used to extend the children tags\n * @param   { * } key - value to assign to the new object returned\n * @param   { * } val - value containing the position of the item in the array\n * @param   { Object } base - prototype object for the new item\n * @returns { Object } - new object containing the values of the original item\n *\n * The variables 'key' and 'val' are arbitrary.\n * They depend on the collection type looped (Array, Object)\n * and on the expression used on the each tag\n *\n */\nfunction mkitem(expr, key, val, base) {\n  var item = base ? Object.create(base) : {};\n  item[expr.key] = key;\n  if (expr.pos) { item[expr.pos] = val; }\n  return item\n}\n\n/**\n * Unmount the redundant tags\n * @param   { Array } items - array containing the current items to loop\n * @param   { Array } tags - array containing all the children tags\n */\nfunction unmountRedundant(items, tags) {\n  var i = tags.length,\n    j = items.length;\n\n  while (i > j) {\n    i--;\n    remove.apply(tags[i], [tags, i]);\n  }\n}\n\n\n/**\n * Remove a child tag\n * @this Tag\n * @param   { Array } tags - tags collection\n * @param   { Number } i - index of the tag to remove\n */\nfunction remove(tags, i) {\n  tags.splice(i, 1);\n  this.unmount();\n  arrayishRemove(this.parent, this, this.__.tagName, true);\n}\n\n/**\n * Move the nested custom tags in non custom loop tags\n * @this Tag\n * @param   { Number } i - current position of the loop tag\n */\nfunction moveNestedTags(i) {\n  var this$1 = this;\n\n  each(Object.keys(this.tags), function (tagName) {\n    var tag = this$1.tags[tagName];\n    if (isArray(tag))\n      { each(tag, function (t) {\n        moveChildTag.apply(t, [tagName, i]);\n      }); }\n    else\n      { moveChildTag.apply(tag, [tagName, i]); }\n  });\n}\n\n/**\n * Move a child tag\n * @this Tag\n * @param   { HTMLElement } root - dom node containing all the loop children\n * @param   { Tag } nextTag - instance of the next tag preceding the one we want to move\n * @param   { Boolean } isVirtual - is it a virtual tag?\n */\nfunction move(root, nextTag, isVirtual) {\n  if (isVirtual)\n    { moveVirtual.apply(this, [root, nextTag]); }\n  else\n    { safeInsert(root, this.root, nextTag.root); }\n}\n\n/**\n * Insert and mount a child tag\n * @this Tag\n * @param   { HTMLElement } root - dom node containing all the loop children\n * @param   { Tag } nextTag - instance of the next tag preceding the one we want to insert\n * @param   { Boolean } isVirtual - is it a virtual tag?\n */\nfunction insert(root, nextTag, isVirtual) {\n  if (isVirtual)\n    { makeVirtual.apply(this, [root, nextTag]); }\n  else\n    { safeInsert(root, this.root, nextTag.root); }\n}\n\n/**\n * Append a new tag into the DOM\n * @this Tag\n * @param   { HTMLElement } root - dom node containing all the loop children\n * @param   { Boolean } isVirtual - is it a virtual tag?\n */\nfunction append(root, isVirtual) {\n  if (isVirtual)\n    { makeVirtual.call(this, root); }\n  else\n    { root.appendChild(this.root); }\n}\n\n/**\n * Manage tags having the 'each'\n * @param   { HTMLElement } dom - DOM node we need to loop\n * @param   { Tag } parent - parent tag instance where the dom node is contained\n * @param   { String } expr - string contained in the 'each' attribute\n * @returns { Object } expression object for this each loop\n */\nfunction _each(dom, parent, expr) {\n\n  // remove the each property from the original tag\n  remAttr(dom, LOOP_DIRECTIVE);\n\n  var mustReorder = typeof getAttr(dom, LOOP_NO_REORDER_DIRECTIVE) !== T_STRING || remAttr(dom, LOOP_NO_REORDER_DIRECTIVE),\n    tagName = getTagName(dom),\n    impl = __TAG_IMPL[tagName],\n    parentNode = dom.parentNode,\n    placeholder = createDOMPlaceholder(),\n    child = getTag(dom),\n    ifExpr = getAttr(dom, CONDITIONAL_DIRECTIVE),\n    tags = [],\n    oldItems = [],\n    hasKeys,\n    isLoop = true,\n    isAnonymous = !__TAG_IMPL[tagName],\n    isVirtual = dom.tagName === 'VIRTUAL';\n\n  // parse the each expression\n  expr = tmpl.loopKeys(expr);\n  expr.isLoop = true;\n\n  if (ifExpr) { remAttr(dom, CONDITIONAL_DIRECTIVE); }\n\n  // insert a marked where the loop tags will be injected\n  parentNode.insertBefore(placeholder, dom);\n  parentNode.removeChild(dom);\n\n  expr.update = function updateEach() {\n    // get the new items collection\n    var items = tmpl(expr.val, parent),\n      frag = createFrag(),\n      isObject$$1 = !isArray(items) && !isString(items),\n      root = placeholder.parentNode;\n\n    // object loop. any changes cause full redraw\n    if (isObject$$1) {\n      hasKeys = items || false;\n      items = hasKeys ?\n        Object.keys(items).map(function (key) {\n          return mkitem(expr, items[key], key)\n        }) : [];\n    } else {\n      hasKeys = false;\n    }\n\n    if (ifExpr) {\n      items = items.filter(function(item, i) {\n        if (expr.key && !isObject$$1)\n          { return !!tmpl(ifExpr, mkitem(expr, item, i, parent)) }\n\n        return !!tmpl(ifExpr, extend(Object.create(parent), item))\n      });\n    }\n\n    // loop all the new items\n    each(items, function(item, i) {\n      // reorder only if the items are objects\n      var\n        doReorder = mustReorder && typeof item === T_OBJECT && !hasKeys,\n        oldPos = oldItems.indexOf(item),\n        isNew = oldPos === -1,\n        pos = !isNew && doReorder ? oldPos : i,\n        // does a tag exist in this position?\n        tag = tags[pos],\n        mustAppend = i >= oldItems.length,\n        mustCreate =  doReorder && isNew || !doReorder && !tag;\n\n      item = !hasKeys && expr.key ? mkitem(expr, item, i) : item;\n\n      // new tag\n      if (mustCreate) {\n        tag = new Tag$1(impl, {\n          parent: parent,\n          isLoop: isLoop,\n          isAnonymous: isAnonymous,\n          tagName: tagName,\n          root: dom.cloneNode(isAnonymous),\n          item: item,\n          index: i,\n        }, dom.innerHTML);\n\n        // mount the tag\n        tag.mount();\n\n        if (mustAppend)\n          { append.apply(tag, [frag || root, isVirtual]); }\n        else\n          { insert.apply(tag, [root, tags[i], isVirtual]); }\n\n        if (!mustAppend) { oldItems.splice(i, 0, item); }\n        tags.splice(i, 0, tag);\n        if (child) { arrayishAdd(parent.tags, tagName, tag, true); }\n      } else if (pos !== i && doReorder) {\n        // move\n        if (contains(items, oldItems[pos])) {\n          move.apply(tag, [root, tags[i], isVirtual]);\n          // move the old tag instance\n          tags.splice(i, 0, tags.splice(pos, 1)[0]);\n          // move the old item\n          oldItems.splice(i, 0, oldItems.splice(pos, 1)[0]);\n        } else { // remove\n          remove.apply(tags[i], [tags, i]);\n          oldItems.splice(i, 1);\n        }\n\n        // update the position attribute if it exists\n        if (expr.pos) { tag[expr.pos] = i; }\n\n        // if the loop tags are not custom\n        // we need to move all their custom tags into the right position\n        if (!child && tag.tags) { moveNestedTags.call(tag, i); }\n      }\n\n      // cache the original item to use it in the events bound to this node\n      // and its children\n      tag.__.item = item;\n      tag.__.index = i;\n      tag.__.parent = parent;\n\n      if (!mustCreate) { tag.update(item); }\n    });\n\n    // remove the redundant tags\n    unmountRedundant(items, tags);\n\n    // clone the items array\n    oldItems = items.slice();\n\n    root.insertBefore(frag, placeholder);\n  };\n\n  expr.unmount = function() {\n    each(tags, function(t) { t.unmount(); });\n  };\n\n  return expr\n}\n\n/**\n * Walk the tag DOM to detect the expressions to evaluate\n * @this Tag\n * @param   { HTMLElement } root - root tag where we will start digging the expressions\n * @param   { Array } expressions - empty array where the expressions will be added\n * @param   { Boolean } mustIncludeRoot - flag to decide whether the root must be parsed as well\n * @returns { Object } an object containing the root noode and the dom tree\n */\nfunction parseExpressions(root, expressions, mustIncludeRoot) {\n  var this$1 = this;\n\n  var tree = {parent: {children: expressions}};\n\n  walkNodes(root, function (dom, ctx) {\n    var type = dom.nodeType, parent = ctx.parent, attr, expr, tagImpl;\n    if (!mustIncludeRoot && dom === root) { return {parent: parent} }\n\n    // text node\n    if (type === 3 && dom.parentNode.tagName !== 'STYLE' && tmpl.hasExpr(dom.nodeValue))\n      { parent.children.push({dom: dom, expr: dom.nodeValue}); }\n\n    if (type !== 1) { return ctx } // not an element\n\n    var isVirtual = dom.tagName === 'VIRTUAL';\n\n    // loop. each does it's own thing (for now)\n    if (attr = getAttr(dom, LOOP_DIRECTIVE)) {\n      if(isVirtual) { setAttr(dom, 'loopVirtual', true); } // ignore here, handled in _each\n      parent.children.push(_each(dom, this$1, attr));\n      return false\n    }\n\n    // if-attrs become the new parent. Any following expressions (either on the current\n    // element, or below it) become children of this expression.\n    if (attr = getAttr(dom, CONDITIONAL_DIRECTIVE)) {\n      parent.children.push(Object.create(IfExpr).init(dom, this$1, attr));\n      return false\n    }\n\n    if (expr = getAttr(dom, IS_DIRECTIVE)) {\n      if (tmpl.hasExpr(expr)) {\n        parent.children.push({isRtag: true, expr: expr, dom: dom, attrs: [].slice.call(dom.attributes)});\n        return false\n      }\n    }\n\n    // if this is a tag, stop traversing here.\n    // we ignore the root, since parseExpressions is called while we're mounting that root\n    tagImpl = getTag(dom);\n    if(isVirtual) {\n      if(getAttr(dom, 'virtualized')) {dom.parentElement.removeChild(dom); } // tag created, remove from dom\n      if(!tagImpl && !getAttr(dom, 'virtualized') && !getAttr(dom, 'loopVirtual'))  // ok to create virtual tag\n        { tagImpl = { tmpl: dom.outerHTML }; }\n    }\n\n    if (tagImpl && (dom !== root || mustIncludeRoot)) {\n      if(isVirtual && !getAttr(dom, IS_DIRECTIVE)) { // handled in update\n        // can not remove attribute like directives\n        // so flag for removal after creation to prevent maximum stack error\n        setAttr(dom, 'virtualized', true);\n\n        var tag = new Tag$1({ tmpl: dom.outerHTML },\n          {root: dom, parent: this$1},\n          dom.innerHTML);\n        parent.children.push(tag); // no return, anonymous tag, keep parsing\n      } else {\n        var conf = {root: dom, parent: this$1, hasImpl: true};\n        parent.children.push(initChildTag(tagImpl, conf, dom.innerHTML, this$1));\n        return false\n      }\n    }\n\n    // attribute expressions\n    parseAttributes.apply(this$1, [dom, dom.attributes, function(attr, expr) {\n      if (!expr) { return }\n      parent.children.push(expr);\n    }]);\n\n    // whatever the parent is, all child elements get the same parent.\n    // If this element had an if-attr, that's the parent for all child elements\n    return {parent: parent}\n  }, tree);\n\n  return { tree: tree, root: root }\n}\n\n/**\n * Calls `fn` for every attribute on an element. If that attr has an expression,\n * it is also passed to fn.\n * @this Tag\n * @param   { HTMLElement } dom - dom node to parse\n * @param   { Array } attrs - array of attributes\n * @param   { Function } fn - callback to exec on any iteration\n */\nfunction parseAttributes(dom, attrs, fn) {\n  var this$1 = this;\n\n  each(attrs, function (attr) {\n    var name = attr.name, bool = isBoolAttr(name), expr;\n\n    if (contains(REF_DIRECTIVES, name)) {\n      expr =  Object.create(RefExpr).init(dom, this$1, name, attr.value);\n    } else if (tmpl.hasExpr(attr.value)) {\n      expr = {dom: dom, expr: attr.value, attr: attr.name, bool: bool};\n    }\n\n    fn(attr, expr);\n  });\n}\n\n/*\n  Includes hacks needed for the Internet Explorer version 9 and below\n  See: http://kangax.github.io/compat-table/es5/#ie8\n       http://codeplanet.io/dropping-ie8/\n*/\n\nvar reHasYield  = /<yield\\b/i;\nvar reYieldAll  = /<yield\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>|>)/ig;\nvar reYieldSrc  = /<yield\\s+to=['\"]([^'\">]*)['\"]\\s*>([\\S\\s]*?)<\\/yield\\s*>/ig;\nvar reYieldDest = /<yield\\s+from=['\"]?([-\\w]+)['\"]?\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>)/ig;\nvar rootEls = { tr: 'tbody', th: 'tr', td: 'tr', col: 'colgroup' };\nvar tblTags = IE_VERSION && IE_VERSION < 10 ? RE_SPECIAL_TAGS : RE_SPECIAL_TAGS_NO_OPTION;\nvar GENERIC = 'div';\n\n\n/*\n  Creates the root element for table or select child elements:\n  tr/th/td/thead/tfoot/tbody/caption/col/colgroup/option/optgroup\n*/\nfunction specialTags(el, tmpl, tagName) {\n\n  var\n    select = tagName[0] === 'o',\n    parent = select ? 'select>' : 'table>';\n\n  // trim() is important here, this ensures we don't have artifacts,\n  // so we can check if we have only one element inside the parent\n  el.innerHTML = '<' + parent + tmpl.trim() + '</' + parent;\n  parent = el.firstChild;\n\n  // returns the immediate parent if tr/th/td/col is the only element, if not\n  // returns the whole tree, as this can include additional elements\n  if (select) {\n    parent.selectedIndex = -1;  // for IE9, compatible w/current riot behavior\n  } else {\n    // avoids insertion of cointainer inside container (ex: tbody inside tbody)\n    var tname = rootEls[tagName];\n    if (tname && parent.childElementCount === 1) { parent = $(tname, parent); }\n  }\n  return parent\n}\n\n/*\n  Replace the yield tag from any tag template with the innerHTML of the\n  original tag in the page\n*/\nfunction replaceYield(tmpl, html) {\n  // do nothing if no yield\n  if (!reHasYield.test(tmpl)) { return tmpl }\n\n  // be careful with #1343 - string on the source having `$1`\n  var src = {};\n\n  html = html && html.replace(reYieldSrc, function (_, ref, text) {\n    src[ref] = src[ref] || text;   // preserve first definition\n    return ''\n  }).trim();\n\n  return tmpl\n    .replace(reYieldDest, function (_, ref, def) {  // yield with from - to attrs\n      return src[ref] || def || ''\n    })\n    .replace(reYieldAll, function (_, def) {        // yield without any \"from\"\n      return html || def || ''\n    })\n}\n\n/**\n * Creates a DOM element to wrap the given content. Normally an `DIV`, but can be\n * also a `TABLE`, `SELECT`, `TBODY`, `TR`, or `COLGROUP` element.\n *\n * @param   { String } tmpl  - The template coming from the custom tag definition\n * @param   { String } html - HTML content that comes from the DOM element where you\n *           will mount the tag, mostly the original tag in the page\n * @param   { Boolean } checkSvg - flag needed to know if we need to force the svg rendering in case of loop nodes\n * @returns { HTMLElement } DOM element with _tmpl_ merged through `YIELD` with the _html_.\n */\nfunction mkdom(tmpl, html, checkSvg) {\n  var match   = tmpl && tmpl.match(/^\\s*<([-\\w]+)/),\n    tagName = match && match[1].toLowerCase(),\n    el = mkEl(GENERIC, checkSvg && isSVGTag(tagName));\n\n  // replace all the yield tags with the tag inner html\n  tmpl = replaceYield(tmpl, html);\n\n  /* istanbul ignore next */\n  if (tblTags.test(tagName))\n    { el = specialTags(el, tmpl, tagName); }\n  else\n    { setInnerHTML(el, tmpl); }\n\n  return el\n}\n\n/**\n * Another way to create a riot tag a bit more es6 friendly\n * @param { HTMLElement } el - tag DOM selector or DOM node/s\n * @param { Object } opts - tag logic\n * @returns { Tag } new riot tag instance\n */\nfunction Tag$2(el, opts) {\n  // get the tag properties from the class constructor\n  var ref = this;\n  var name = ref.name;\n  var tmpl = ref.tmpl;\n  var css = ref.css;\n  var attrs = ref.attrs;\n  var onCreate = ref.onCreate;\n  // register a new tag and cache the class prototype\n  if (!__TAG_IMPL[name]) {\n    tag$1(name, tmpl, css, attrs, onCreate);\n    // cache the class constructor\n    __TAG_IMPL[name].class = this.constructor;\n  }\n\n  // mount the tag using the class instance\n  mountTo(el, name, opts, this);\n  // inject the component css\n  if (css) { styleManager.inject(); }\n\n  return this\n}\n\n/**\n * Create a new riot tag implementation\n * @param   { String }   name - name/id of the new riot tag\n * @param   { String }   tmpl - tag template\n * @param   { String }   css - custom tag css\n * @param   { String }   attrs - root tag attributes\n * @param   { Function } fn - user function\n * @returns { String } name/id of the tag just created\n */\nfunction tag$1(name, tmpl, css, attrs, fn) {\n  if (isFunction(attrs)) {\n    fn = attrs;\n\n    if (/^[\\w\\-]+\\s?=/.test(css)) {\n      attrs = css;\n      css = '';\n    } else\n      { attrs = ''; }\n  }\n\n  if (css) {\n    if (isFunction(css))\n      { fn = css; }\n    else\n      { styleManager.add(css); }\n  }\n\n  name = name.toLowerCase();\n  __TAG_IMPL[name] = { name: name, tmpl: tmpl, attrs: attrs, fn: fn };\n\n  return name\n}\n\n/**\n * Create a new riot tag implementation (for use by the compiler)\n * @param   { String }   name - name/id of the new riot tag\n * @param   { String }   tmpl - tag template\n * @param   { String }   css - custom tag css\n * @param   { String }   attrs - root tag attributes\n * @param   { Function } fn - user function\n * @returns { String } name/id of the tag just created\n */\nfunction tag2$1(name, tmpl, css, attrs, fn) {\n  if (css)\n    { styleManager.add(css, name); }\n\n  var exists = !!__TAG_IMPL[name];\n  __TAG_IMPL[name] = { name: name, tmpl: tmpl, attrs: attrs, fn: fn };\n\n  if (exists && util.hotReloader)\n    { util.hotReloader(name); }\n\n  return name\n}\n\n/**\n * Mount a tag using a specific tag implementation\n * @param   { * } selector - tag DOM selector or DOM node/s\n * @param   { String } tagName - tag implementation name\n * @param   { Object } opts - tag logic\n * @returns { Array } new tags instances\n */\nfunction mount$1(selector, tagName, opts) {\n  var tags = [];\n\n  function pushTagsTo(root) {\n    if (root.tagName) {\n      var riotTag = getAttr(root, IS_DIRECTIVE);\n\n      // have tagName? force riot-tag to be the same\n      if (tagName && riotTag !== tagName) {\n        riotTag = tagName;\n        setAttr(root, IS_DIRECTIVE, tagName);\n      }\n\n      var tag$$1 = mountTo(root, riotTag || root.tagName.toLowerCase(), opts);\n\n      if (tag$$1)\n        { tags.push(tag$$1); }\n    } else if (root.length)\n      { each(root, pushTagsTo); } // assume nodeList\n  }\n\n  // inject styles into DOM\n  styleManager.inject();\n\n  if (isObject(tagName)) {\n    opts = tagName;\n    tagName = 0;\n  }\n\n  var elem;\n  var allTags;\n\n  // crawl the DOM to find the tag\n  if (isString(selector)) {\n    selector = selector === '*' ?\n      // select all registered tags\n      // & tags found with the riot-tag attribute set\n      allTags = selectTags() :\n      // or just the ones named like the selector\n      selector + selectTags(selector.split(/, */));\n\n    // make sure to pass always a selector\n    // to the querySelectorAll function\n    elem = selector ? $$(selector) : [];\n  }\n  else\n    // probably you have passed already a tag or a NodeList\n    { elem = selector; }\n\n  // select all the registered and mount them inside their root elements\n  if (tagName === '*') {\n    // get all custom tags\n    tagName = allTags || selectTags();\n    // if the root els it's just a single tag\n    if (elem.tagName)\n      { elem = $$(tagName, elem); }\n    else {\n      // select all the children for all the different root elements\n      var nodeList = [];\n\n      each(elem, function (_el) { return nodeList.push($$(tagName, _el)); });\n\n      elem = nodeList;\n    }\n    // get rid of the tagName\n    tagName = 0;\n  }\n\n  pushTagsTo(elem);\n\n  return tags\n}\n\n// Create a mixin that could be globally shared across all the tags\nvar mixins = {};\nvar globals = mixins[GLOBAL_MIXIN] = {};\nvar _id = 0;\n\n/**\n * Create/Return a mixin by its name\n * @param   { String }  name - mixin name (global mixin if object)\n * @param   { Object }  mix - mixin logic\n * @param   { Boolean } g - is global?\n * @returns { Object }  the mixin logic\n */\nfunction mixin$1(name, mix, g) {\n  // Unnamed global\n  if (isObject(name)) {\n    mixin$1((\"__unnamed_\" + (_id++)), name, true);\n    return\n  }\n\n  var store = g ? globals : mixins;\n\n  // Getter\n  if (!mix) {\n    if (isUndefined(store[name]))\n      { throw new Error('Unregistered mixin: ' + name) }\n\n    return store[name]\n  }\n\n  // Setter\n  store[name] = isFunction(mix) ?\n    extend(mix.prototype, store[name] || {}) && mix :\n    extend(store[name] || {}, mix);\n}\n\n/**\n * Update all the tags instances created\n * @returns { Array } all the tags instances\n */\nfunction update$1() {\n  return each(__TAGS_CACHE, function (tag$$1) { return tag$$1.update(); })\n}\n\nfunction unregister$1(name) {\n  delete __TAG_IMPL[name];\n}\n\n\nvar core = Object.freeze({\n\tTag: Tag$2,\n\ttag: tag$1,\n\ttag2: tag2$1,\n\tmount: mount$1,\n\tmixin: mixin$1,\n\tupdate: update$1,\n\tunregister: unregister$1\n});\n\n// counter to give a unique id to all the Tag instances\nvar __uid = 0;\n\n/**\n * We need to update opts for this tag. That requires updating the expressions\n * in any attributes on the tag, and then copying the result onto opts.\n * @this Tag\n * @param   {Boolean} isLoop - is it a loop tag?\n * @param   { Tag }  parent - parent tag node\n * @param   { Boolean }  isAnonymous - is it a tag without any impl? (a tag not registered)\n * @param   { Object }  opts - tag options\n * @param   { Array }  instAttrs - tag attributes array\n */\nfunction updateOpts(isLoop, parent, isAnonymous, opts, instAttrs) {\n  // isAnonymous `each` tags treat `dom` and `root` differently. In this case\n  // (and only this case) we don't need to do updateOpts, because the regular parse\n  // will update those attrs. Plus, isAnonymous tags don't need opts anyway\n  if (isLoop && isAnonymous) { return }\n\n  var ctx = !isAnonymous && isLoop ? this : parent || this;\n  each(instAttrs, function (attr) {\n    if (attr.expr) { updateAllExpressions.call(ctx, [attr.expr]); }\n    opts[toCamel(attr.name)] = attr.expr ? attr.expr.value : attr.value;\n  });\n}\n\n\n/**\n * Tag class\n * @constructor\n * @param { Object } impl - it contains the tag template, and logic\n * @param { Object } conf - tag options\n * @param { String } innerHTML - html that eventually we need to inject in the tag\n */\nfunction Tag$1(impl, conf, innerHTML) {\n  if ( impl === void 0 ) impl = {};\n  if ( conf === void 0 ) conf = {};\n\n\n  var opts = extend({}, conf.opts),\n    parent = conf.parent,\n    isLoop = conf.isLoop,\n    isAnonymous = !!conf.isAnonymous,\n    skipAnonymous = settings$1.skipAnonymousTags && isAnonymous,\n    item = cleanUpData(conf.item),\n    index = conf.index, // available only for the looped nodes\n    instAttrs = [], // All attributes on the Tag when it's first parsed\n    implAttrs = [], // expressions on this type of Tag\n    expressions = [],\n    root = conf.root,\n    tagName = conf.tagName || getTagName(root),\n    isVirtual = tagName === 'virtual',\n    propsInSyncWithParent = [],\n    dom;\n\n  // make this tag observable\n  if (!skipAnonymous) { observable$1(this); }\n  // only call unmount if we have a valid __TAG_IMPL (has name property)\n  if (impl.name && root._tag) { root._tag.unmount(true); }\n\n  // not yet mounted\n  this.isMounted = false;\n\n  defineProperty(this, '__', {\n    isAnonymous: isAnonymous,\n    instAttrs: instAttrs,\n    innerHTML: innerHTML,\n    tagName: tagName,\n    index: index,\n    isLoop: isLoop,\n    // these vars will be needed only for the virtual tags\n    virts: [],\n    tail: null,\n    head: null,\n    parent: null,\n    item: null\n  });\n\n  // create a unique id to this tag\n  // it could be handy to use it also to improve the virtual dom rendering speed\n  defineProperty(this, '_riot_id', ++__uid); // base 1 allows test !t._riot_id\n  defineProperty(this, 'root', root);\n  extend(this, { opts: opts }, item);\n  // protect the \"tags\" and \"refs\" property from being overridden\n  defineProperty(this, 'parent', parent || null);\n  defineProperty(this, 'tags', {});\n  defineProperty(this, 'refs', {});\n\n  dom = isLoop && isAnonymous ? root : mkdom(impl.tmpl, innerHTML, isLoop);\n\n  /**\n   * Update the tag expressions and options\n   * @param   { * }  data - data we want to use to extend the tag properties\n   * @returns { Tag } the current tag instance\n   */\n  defineProperty(this, 'update', function tagUpdate(data) {\n    var nextOpts = {};\n    updateOpts.apply(this, [isLoop, parent, isAnonymous, nextOpts, instAttrs]);\n    if (isFunction(this.shouldUpdate) && !this.shouldUpdate(data, nextOpts)) { return this }\n    var canTrigger = this.isMounted && !skipAnonymous;\n\n    // make sure the data passed will not override\n    // the component core methods\n    data = cleanUpData(data);\n\n    // inherit properties from the parent, but only for isAnonymous tags\n    if (isLoop && isAnonymous) { inheritFrom.apply(this, [this.parent, propsInSyncWithParent]); }\n    extend(this, data);\n    extend(opts, nextOpts);\n    if (canTrigger) { this.trigger('update', data); }\n    updateAllExpressions.call(this, expressions);\n    if (canTrigger) { this.trigger('updated'); }\n\n    return this\n\n  }.bind(this));\n\n  /**\n   * Add a mixin to this tag\n   * @returns { Tag } the current tag instance\n   */\n  defineProperty(this, 'mixin', function tagMixin() {\n    var this$1 = this;\n\n    each(arguments, function (mix) {\n      var instance,\n        props = [],\n        obj;\n\n      mix = isString(mix) ? mixin$1(mix) : mix;\n\n      // check if the mixin is a function\n      if (isFunction(mix)) {\n        // create the new mixin instance\n        instance = new mix();\n      } else { instance = mix; }\n\n      var proto = Object.getPrototypeOf(instance);\n\n      // build multilevel prototype inheritance chain property list\n      do { props = props.concat(Object.getOwnPropertyNames(obj || instance)); }\n      while (obj = Object.getPrototypeOf(obj || instance))\n\n      // loop the keys in the function prototype or the all object keys\n      each(props, function (key) {\n        // bind methods to this\n        // allow mixins to override other properties/parent mixins\n        if (key !== 'init') {\n          // check for getters/setters\n          var descriptor = Object.getOwnPropertyDescriptor(instance, key) || Object.getOwnPropertyDescriptor(proto, key);\n          var hasGetterSetter = descriptor && (descriptor.get || descriptor.set);\n\n          // apply method only if it does not already exist on the instance\n          if (!this$1.hasOwnProperty(key) && hasGetterSetter) {\n            Object.defineProperty(this$1, key, descriptor);\n          } else {\n            this$1[key] = isFunction(instance[key]) ?\n              instance[key].bind(this$1) :\n              instance[key];\n          }\n        }\n      });\n\n      // init method will be called automatically\n      if (instance.init)\n        { instance.init.bind(this$1)(); }\n    });\n    return this\n  }.bind(this));\n\n  /**\n   * Mount the current tag instance\n   * @returns { Tag } the current tag instance\n   */\n  defineProperty(this, 'mount', function tagMount() {\n    var this$1 = this;\n\n    var _parent = this.__.parent;\n    root._tag = this; // keep a reference to the tag just created\n\n    // Read all the attrs on this instance. This give us the info we need for updateOpts\n    parseAttributes.apply(parent, [root, root.attributes, function (attr, expr) {\n      if (!isAnonymous && RefExpr.isPrototypeOf(expr)) { expr.tag = this$1; }\n      attr.expr = expr;\n      instAttrs.push(attr);\n    }]);\n\n    // update the root adding custom attributes coming from the compiler\n    implAttrs = [];\n    walkAttrs(impl.attrs, function (k, v) { implAttrs.push({name: k, value: v}); });\n    parseAttributes.apply(this, [root, implAttrs, function (attr, expr) {\n      if (expr) { expressions.push(expr); }\n      else { setAttr(root, attr.name, attr.value); }\n    }]);\n\n    // children in loop should inherit from true parent\n    if (_parent && isAnonymous) { inheritFrom.apply(this, [_parent, propsInSyncWithParent]); }\n\n    // initialiation\n    updateOpts.apply(this, [isLoop, parent, isAnonymous, opts, instAttrs]);\n\n    // add global mixins\n    var globalMixin = mixin$1(GLOBAL_MIXIN);\n\n    if (globalMixin && !skipAnonymous) {\n      for (var i in globalMixin) {\n        if (globalMixin.hasOwnProperty(i)) {\n          this$1.mixin(globalMixin[i]);\n        }\n      }\n    }\n\n    if (impl.fn) { impl.fn.call(this, opts); }\n\n    if (!skipAnonymous) { this.trigger('before-mount'); }\n\n    // parse layout after init. fn may calculate args for nested custom tags\n    parseExpressions.apply(this, [dom, expressions, isAnonymous]);\n\n    this.update(item);\n\n    if (!isAnonymous) {\n      while (dom.firstChild) { root.appendChild(dom.firstChild); }\n    }\n\n    defineProperty(this, 'root', root);\n    defineProperty(this, 'isMounted', true);\n\n    if (skipAnonymous) { return }\n\n    // if it's not a child tag we can trigger its mount event\n    if (!this.parent) {\n      this.trigger('mount');\n    }\n    // otherwise we need to wait that the parent \"mount\" or \"updated\" event gets triggered\n    else {\n      var p = getImmediateCustomParentTag(this.parent);\n      p.one(!p.isMounted ? 'mount' : 'updated', function () {\n        this$1.trigger('mount');\n      });\n    }\n\n    return this\n\n  }.bind(this));\n\n  /**\n   * Unmount the tag instance\n   * @param { Boolean } mustKeepRoot - if it's true the root node will not be removed\n   * @returns { Tag } the current tag instance\n   */\n  defineProperty(this, 'unmount', function tagUnmount(mustKeepRoot) {\n    var this$1 = this;\n\n    var el = this.root,\n      p = el.parentNode,\n      ptag,\n      tagIndex = __TAGS_CACHE.indexOf(this);\n\n    if (!skipAnonymous) { this.trigger('before-unmount'); }\n\n    // clear all attributes coming from the mounted tag\n    walkAttrs(impl.attrs, function (name) {\n      if (startsWith(name, ATTRS_PREFIX))\n        { name = name.slice(ATTRS_PREFIX.length); }\n      remAttr(root, name);\n    });\n\n    // remove this tag instance from the global virtualDom variable\n    if (tagIndex !== -1)\n      { __TAGS_CACHE.splice(tagIndex, 1); }\n\n    if (p || isVirtual) {\n      if (parent) {\n        ptag = getImmediateCustomParentTag(parent);\n\n        if (isVirtual) {\n          Object.keys(this.tags).forEach(function (tagName) {\n            arrayishRemove(ptag.tags, tagName, this$1.tags[tagName]);\n          });\n        } else {\n          arrayishRemove(ptag.tags, tagName, this);\n          if(parent !== ptag) // remove from _parent too\n            { arrayishRemove(parent.tags, tagName, this); }\n        }\n      } else {\n        while (el.firstChild) { el.removeChild(el.firstChild); }\n      }\n\n      if (p)\n        { if (!mustKeepRoot) {\n          p.removeChild(el);\n        } else {\n          // the riot-tag and the data-is attributes aren't needed anymore, remove them\n          remAttr(p, IS_DIRECTIVE);\n        } }\n    }\n\n    if (this.__.virts) {\n      each(this.__.virts, function (v) {\n        if (v.parentNode) { v.parentNode.removeChild(v); }\n      });\n    }\n\n    // allow expressions to unmount themselves\n    unmountAll(expressions);\n    each(instAttrs, function (a) { return a.expr && a.expr.unmount && a.expr.unmount(); });\n\n    // custom internal unmount function to avoid relying on the observable\n    if (this.__.onUnmount) { this.__.onUnmount(); }\n\n    if (!skipAnonymous) {\n      this.trigger('unmount');\n      this.off('*');\n    }\n\n    defineProperty(this, 'isMounted', false);\n\n    delete this.root._tag;\n\n    return this\n\n  }.bind(this));\n}\n\n/**\n * Detect the tag implementation by a DOM node\n * @param   { Object } dom - DOM node we need to parse to get its tag implementation\n * @returns { Object } it returns an object containing the implementation of a custom tag (template and boot function)\n */\nfunction getTag(dom) {\n  return dom.tagName && __TAG_IMPL[getAttr(dom, IS_DIRECTIVE) ||\n    getAttr(dom, IS_DIRECTIVE) || dom.tagName.toLowerCase()]\n}\n\n/**\n * Inherit properties from a target tag instance\n * @this Tag\n * @param   { Tag } target - tag where we will inherit properties\n * @param   { Array } propsInSyncWithParent - array of properties to sync with the target\n */\nfunction inheritFrom(target, propsInSyncWithParent) {\n  var this$1 = this;\n\n  each(Object.keys(target), function (k) {\n    // some properties must be always in sync with the parent tag\n    var mustSync = !isReservedName(k) && contains(propsInSyncWithParent, k);\n\n    if (isUndefined(this$1[k]) || mustSync) {\n      // track the property to keep in sync\n      // so we can keep it updated\n      if (!mustSync) { propsInSyncWithParent.push(k); }\n      this$1[k] = target[k];\n    }\n  });\n}\n\n/**\n * Move the position of a custom tag in its parent tag\n * @this Tag\n * @param   { String } tagName - key where the tag was stored\n * @param   { Number } newPos - index where the new tag will be stored\n */\nfunction moveChildTag(tagName, newPos) {\n  var parent = this.parent,\n    tags;\n  // no parent no move\n  if (!parent) { return }\n\n  tags = parent.tags[tagName];\n\n  if (isArray(tags))\n    { tags.splice(newPos, 0, tags.splice(tags.indexOf(this), 1)[0]); }\n  else { arrayishAdd(parent.tags, tagName, this); }\n}\n\n/**\n * Create a new child tag including it correctly into its parent\n * @param   { Object } child - child tag implementation\n * @param   { Object } opts - tag options containing the DOM node where the tag will be mounted\n * @param   { String } innerHTML - inner html of the child node\n * @param   { Object } parent - instance of the parent tag including the child custom tag\n * @returns { Object } instance of the new child tag just created\n */\nfunction initChildTag(child, opts, innerHTML, parent) {\n  var tag = new Tag$1(child, opts, innerHTML),\n    tagName = opts.tagName || getTagName(opts.root, true),\n    ptag = getImmediateCustomParentTag(parent);\n  // fix for the parent attribute in the looped elements\n  defineProperty(tag, 'parent', ptag);\n  // store the real parent tag\n  // in some cases this could be different from the custom parent tag\n  // for example in nested loops\n  tag.__.parent = parent;\n\n  // add this tag to the custom parent tag\n  arrayishAdd(ptag.tags, tagName, tag);\n\n  // and also to the real parent tag\n  if (ptag !== parent)\n    { arrayishAdd(parent.tags, tagName, tag); }\n\n  // empty the child node once we got its template\n  // to avoid that its children get compiled multiple times\n  opts.root.innerHTML = '';\n\n  return tag\n}\n\n/**\n * Loop backward all the parents tree to detect the first custom parent tag\n * @param   { Object } tag - a Tag instance\n * @returns { Object } the instance of the first custom parent tag found\n */\nfunction getImmediateCustomParentTag(tag) {\n  var ptag = tag;\n  while (ptag.__.isAnonymous) {\n    if (!ptag.parent) { break }\n    ptag = ptag.parent;\n  }\n  return ptag\n}\n\n/**\n * Trigger the unmount method on all the expressions\n * @param   { Array } expressions - DOM expressions\n */\nfunction unmountAll(expressions) {\n  each(expressions, function(expr) {\n    if (expr instanceof Tag$1) { expr.unmount(true); }\n    else if (expr.unmount) { expr.unmount(); }\n  });\n}\n\n/**\n * Get the tag name of any DOM node\n * @param   { Object } dom - DOM node we want to parse\n * @param   { Boolean } skipDataIs - hack to ignore the data-is attribute when attaching to parent\n * @returns { String } name to identify this dom node in riot\n */\nfunction getTagName(dom, skipDataIs) {\n  var child = getTag(dom),\n    namedTag = !skipDataIs && getAttr(dom, IS_DIRECTIVE);\n  return namedTag && !tmpl.hasExpr(namedTag) ?\n                namedTag :\n              child ? child.name : dom.tagName.toLowerCase()\n}\n\n/**\n * With this function we avoid that the internal Tag methods get overridden\n * @param   { Object } data - options we want to use to extend the tag instance\n * @returns { Object } clean object without containing the riot internal reserved words\n */\nfunction cleanUpData(data) {\n  if (!(data instanceof Tag$1) && !(data && isFunction(data.trigger)))\n    { return data }\n\n  var o = {};\n  for (var key in data) {\n    if (!RE_RESERVED_NAMES.test(key)) { o[key] = data[key]; }\n  }\n  return o\n}\n\n/**\n * Set the property of an object for a given key. If something already\n * exists there, then it becomes an array containing both the old and new value.\n * @param { Object } obj - object on which to set the property\n * @param { String } key - property name\n * @param { Object } value - the value of the property to be set\n * @param { Boolean } ensureArray - ensure that the property remains an array\n * @param { Number } index - add the new item in a certain array position\n */\nfunction arrayishAdd(obj, key, value, ensureArray, index) {\n  var dest = obj[key];\n  var isArr = isArray(dest);\n  var hasIndex = !isUndefined(index);\n\n  if (dest && dest === value) { return }\n\n  // if the key was never set, set it once\n  if (!dest && ensureArray) { obj[key] = [value]; }\n  else if (!dest) { obj[key] = value; }\n  // if it was an array and not yet set\n  else {\n    if (isArr) {\n      var oldIndex = dest.indexOf(value);\n      // this item never changed its position\n      if (oldIndex === index) { return }\n      // remove the item from its old position\n      if (oldIndex !== -1) { dest.splice(oldIndex, 1); }\n      // move or add the item\n      if (hasIndex) {\n        dest.splice(index, 0, value);\n      } else {\n        dest.push(value);\n      }\n    } else { obj[key] = [dest, value]; }\n  }\n}\n\n/**\n * Removes an item from an object at a given key. If the key points to an array,\n * then the item is just removed from the array.\n * @param { Object } obj - object on which to remove the property\n * @param { String } key - property name\n * @param { Object } value - the value of the property to be removed\n * @param { Boolean } ensureArray - ensure that the property remains an array\n*/\nfunction arrayishRemove(obj, key, value, ensureArray) {\n  if (isArray(obj[key])) {\n    var index = obj[key].indexOf(value);\n    if (index !== -1) { obj[key].splice(index, 1); }\n    if (!obj[key].length) { delete obj[key]; }\n    else if (obj[key].length === 1 && !ensureArray) { obj[key] = obj[key][0]; }\n  } else\n    { delete obj[key]; } // otherwise just delete the key\n}\n\n/**\n * Check whether a DOM node is in stub mode, useful for the riot 'if' directive\n * @param   { Object }  dom - DOM node we want to parse\n * @returns { Boolean } -\n */\nfunction isInStub(dom) {\n  while (dom) {\n    if (dom.inStub)\n      { return true }\n    dom = dom.parentNode;\n  }\n  return false\n}\n\n/**\n * Mount a tag creating new Tag instance\n * @param   { Object } root - dom node where the tag will be mounted\n * @param   { String } tagName - name of the riot tag we want to mount\n * @param   { Object } opts - options to pass to the Tag instance\n * @param   { Object } ctx - optional context that will be used to extend an existing class ( used in riot.Tag )\n * @returns { Tag } a new Tag instance\n */\nfunction mountTo(root, tagName, opts, ctx) {\n  var impl = __TAG_IMPL[tagName],\n    implClass = __TAG_IMPL[tagName].class,\n    tag = ctx || (implClass ? Object.create(implClass.prototype) : {}),\n    // cache the inner HTML to fix #855\n    innerHTML = root._innerHTML = root._innerHTML || root.innerHTML;\n\n  // clear the inner html\n  root.innerHTML = '';\n\n  var conf = { root: root, opts: opts };\n  if (opts && opts.parent) { conf.parent = opts.parent; }\n\n  if (impl && root) { Tag$1.apply(tag, [impl, conf, innerHTML]); }\n\n  if (tag && tag.mount) {\n    tag.mount(true);\n    // add this tag to the virtualDom variable\n    if (!contains(__TAGS_CACHE, tag)) { __TAGS_CACHE.push(tag); }\n  }\n\n  return tag\n}\n\n/**\n * makes a tag virtual and replaces a reference in the dom\n * @this Tag\n * @param { tag } the tag to make virtual\n * @param { ref } the dom reference location\n */\nfunction makeReplaceVirtual(tag, ref) {\n  var frag = createFrag();\n  makeVirtual.call(tag, frag);\n  ref.parentNode.replaceChild(frag, ref);\n}\n\n/**\n * Adds the elements for a virtual tag\n * @this Tag\n * @param { Node } src - the node that will do the inserting or appending\n * @param { Tag } target - only if inserting, insert before this tag's first child\n */\nfunction makeVirtual(src, target) {\n  var this$1 = this;\n\n  var head = createDOMPlaceholder(),\n    tail = createDOMPlaceholder(),\n    frag = createFrag(),\n    sib, el;\n\n  this.__.head = this.root.insertBefore(head, this.root.firstChild);\n  this.__.tail = this.root.appendChild(tail);\n\n  el = this.__.head;\n\n  while (el) {\n    sib = el.nextSibling;\n    frag.appendChild(el);\n    this$1.__.virts.push(el); // hold for unmounting\n    el = sib;\n  }\n\n  if (target)\n    { src.insertBefore(frag, target.__.head); }\n  else\n    { src.appendChild(frag); }\n}\n\n/**\n * Move virtual tag and all child nodes\n * @this Tag\n * @param { Node } src  - the node that will do the inserting\n * @param { Tag } target - insert before this tag's first child\n */\nfunction moveVirtual(src, target) {\n  var this$1 = this;\n\n  var el = this.__.head,\n    frag = createFrag(),\n    sib;\n\n  while (el) {\n    sib = el.nextSibling;\n    frag.appendChild(el);\n    el = sib;\n    if (el === this$1.__.tail) {\n      frag.appendChild(el);\n      src.insertBefore(frag, target.__.head);\n      break\n    }\n  }\n}\n\n/**\n * Get selectors for tags\n * @param   { Array } tags - tag names to select\n * @returns { String } selector\n */\nfunction selectTags(tags) {\n  // select all tags\n  if (!tags) {\n    var keys = Object.keys(__TAG_IMPL);\n    return keys + selectTags(keys)\n  }\n\n  return tags\n    .filter(function (t) { return !/[^-\\w]/.test(t); })\n    .reduce(function (list, t) {\n      var name = t.trim().toLowerCase();\n      return list + \",[\" + IS_DIRECTIVE + \"=\\\"\" + name + \"\\\"]\"\n    }, '')\n}\n\n\nvar tags = Object.freeze({\n\tgetTag: getTag,\n\tinheritFrom: inheritFrom,\n\tmoveChildTag: moveChildTag,\n\tinitChildTag: initChildTag,\n\tgetImmediateCustomParentTag: getImmediateCustomParentTag,\n\tunmountAll: unmountAll,\n\tgetTagName: getTagName,\n\tcleanUpData: cleanUpData,\n\tarrayishAdd: arrayishAdd,\n\tarrayishRemove: arrayishRemove,\n\tisInStub: isInStub,\n\tmountTo: mountTo,\n\tmakeReplaceVirtual: makeReplaceVirtual,\n\tmakeVirtual: makeVirtual,\n\tmoveVirtual: moveVirtual,\n\tselectTags: selectTags\n});\n\n/**\n * Riot public api\n */\nvar settings = settings$1;\nvar util = {\n  tmpl: tmpl,\n  brackets: brackets,\n  styleManager: styleManager,\n  vdom: __TAGS_CACHE,\n  styleNode: styleManager.styleNode,\n  // export the riot internal utils as well\n  dom: dom,\n  check: check,\n  misc: misc,\n  tags: tags\n};\n\n// export the core props/methods\nvar Tag$$1 = Tag$2;\nvar tag$$1 = tag$1;\nvar tag2$$1 = tag2$1;\nvar mount$$1 = mount$1;\nvar mixin$$1 = mixin$1;\nvar update$$1 = update$1;\nvar unregister$$1 = unregister$1;\nvar observable = observable$1;\n\nvar riot$1 = extend({}, core, {\n  observable: observable$1,\n  settings: settings,\n  util: util,\n});\n\nexports.settings = settings;\nexports.util = util;\nexports.Tag = Tag$$1;\nexports.tag = tag$$1;\nexports.tag2 = tag2$$1;\nexports.mount = mount$$1;\nexports.mixin = mixin$$1;\nexports.update = update$$1;\nexports.unregister = unregister$$1;\nexports.observable = observable;\nexports['default'] = riot$1;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n\n\n// WEBPACK FOOTER //\n// ./~/riot/riot.js"],"sourceRoot":""}